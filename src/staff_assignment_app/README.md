# 要員アサイン管理システム

## 概要
アプリケーション運用・保守の要員アサイン管理システムです。約500名の要員（コベルコシステム社員 + パートナー企業）の専門性、スキル、プロフェッションを考慮した効率的なアサイン管理を提供します。

## 主な機能

### 1. 要員管理
- 要員基本情報の登録・編集
- スキル管理（オープン系、ホスト系）
- プロフェッション管理（有識者、PM、設計者、開発者）
- 専門領域管理（生産管理、販売管理、調達管理）

### 2. 案件管理
- 案件基本情報の登録・編集
- 案件要件の定義（必要なスキル、専門性、プロフェッション）
- 案件ステータス管理（計画中、進行中、一時停止、完了）

### 3. アサイン管理
- フルアサイン・パーシャルアサイン対応
- 専門性・スキル・プロフェッションを考慮した自動マッチング
- 要員の稼働状況管理
- アサイン履歴管理

### 4. レポート機能
- 要員別稼働状況レポート
- 案件進捗レポート
- 稼働率分析

## 技術スタック
- **バックエンド**: Python 3.8+, Flask, SQLAlchemy
- **データベース**: SQLite（開発環境）/ PostgreSQL（本番環境）
- **フロントエンド**: HTML5, Bootstrap 5, JavaScript, Chart.js
- **ORM**: SQLAlchemy

## インストール・セットアップ

### 1. 依存関係のインストール
```bash
pip install -r requirements.txt
```

### 2. サンプルデータの投入
```bash
python scripts/sample_data.py
```

### 3. アプリケーションの起動
```bash
python run_app.py
```

### 4. ブラウザでアクセス
http://localhost:5000 にアクセスしてください。

## ディレクトリ構造
```
staff_assignment_app/
├── src/                    # メインアプリケーションコード
│   ├── models.py           # データベースモデル
│   ├── database.py        # データベース接続管理
│   ├── assignment_logic.py # アサインロジック
│   └── app.py             # Flaskアプリケーション
├── templates/             # HTMLテンプレート
│   ├── base.html         # ベーステンプレート
│   ├── index.html        # ダッシュボード
│   ├── staff/            # 要員管理画面
│   ├── project/          # 案件管理画面
│   ├── assignment/        # アサイン管理画面
│   └── reports/          # レポート画面
├── scripts/               # ユーティリティスクリプト
│   └── sample_data.py    # サンプルデータ投入
├── tests/                 # テストコード
├── config/                # 設定ファイル
├── docs/                  # ドキュメント
├── requirements.txt       # 依存関係
└── run_app.py            # アプリケーション起動スクリプト
```

## データベース設計

### 主要テーブル
- **STAFF**: 要員基本情報
- **STAFF_SKILL**: 要員スキル情報
- **STAFF_PROFESSION**: 要員プロフェッション情報
- **STAFF_DOMAIN**: 要員専門領域情報
- **PROJECT**: 案件基本情報
- **PROJECT_REQUIREMENT**: 案件要件
- **ASSIGNMENT**: アサイン情報

### リレーションシップ
- 要員は複数のスキル、プロフェッション、専門領域を持つ
- 案件は複数の要件を持つ
- 要員と案件は多対多の関係（アサイン）

## アサインロジック

### マッチングアルゴリズム
1. **専門領域マッチング**: 案件要件の専門領域と要員の専門領域を照合
2. **スキルマッチング**: 案件要件のスキルと要員のスキルを照合
3. **プロフェッションマッチング**: 案件要件のプロフェッションと要員のプロフェッションを照合
4. **稼働状況確認**: 要員の現在の稼働状況を確認
5. **スコア計算**: 各要素の重み付けスコアを計算

### スコア計算式
```
総合スコア = (専門領域スコア × 0.4) + (スキルスコア × 0.3) + (プロフェッションスコア × 0.3)
```

## 使用方法

### 1. 要員登録
1. 「要員管理」→「新規登録」をクリック
2. 基本情報を入力
3. 要員詳細画面でスキル、プロフェッション、専門領域を設定

### 2. 案件登録
1. 「案件管理」→「新規登録」をクリック
2. 案件基本情報を入力
3. 案件要件を設定

### 3. アサイン作成
1. 「アサイン管理」→「新規作成」をクリック
2. 要員と案件を選択
3. アサインタイプと割合を設定

### 4. 自動マッチング
1. 案件詳細画面で「マッチング検索」をクリック
2. システムが最適な要員を提案
3. 提案された要員から選択してアサイン作成

## テスト実行

```bash
# モデルテスト
python -m pytest tests/test_models.py -v

# 全テスト実行
python -m pytest tests/ -v
```

## 本番環境での運用

### 環境変数設定
```bash
export DATABASE_URL="postgresql://user:password@localhost/staff_assignment"
export FLASK_ENV="production"
export SECRET_KEY="your-secret-key"
```

### データベースマイグレーション
```bash
# 本番データベースの初期化
python -c "from src.database import init_database; init_database()"
```

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。

## サポート
質問や問題がございましたら、プロジェクトのIssuesページでお知らせください。